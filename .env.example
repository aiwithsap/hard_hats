# Hard Hats Detection System - Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# DATABASE (Required)
# =============================================================================
# Railway auto-provides this when PostgreSQL plugin is added
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/hardhats

# =============================================================================
# REDIS (Required for multi-service communication)
# =============================================================================
# Railway auto-provides this when Redis plugin is added
REDIS_URL=redis://localhost:6379

# =============================================================================
# SECURITY (Required - Generate new values for production!)
# =============================================================================

# JWT secret key (generate with: openssl rand -hex 32)
SECRET_KEY=your-32-byte-secret-key-here-change-in-production

# Fernet encryption key for RTSP credentials
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-key-here-change-in-production

# =============================================================================
# WEB SERVICE CONFIG
# =============================================================================

# Port (Railway provides PORT automatically)
PORT=8123

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8123

# Cookie configuration
COOKIE_NAME=session
COOKIE_SECURE=true
COOKIE_SAMESITE=strict

# JWT token expiry in minutes
JWT_EXPIRE_MINUTES=60
JWT_REFRESH_EXPIRE_MINUTES=10080

# Registration (set to false to disable new registrations)
REGISTRATION_ENABLED=true

# =============================================================================
# WORKER SERVICE CONFIG
# =============================================================================

# YOLO model weights path
WEIGHTS_PATH=data/weights/best_yolo11s.pt

# Default inference settings
DEFAULT_CONF=0.25
DEFAULT_IMGSZ=640

# Processing settings
DEFAULT_TARGET_FPS=0.5
MAX_CONCURRENT_CAMERAS=20

# Event deduplication cooldown (seconds)
COOLDOWN_SECONDS=30

# Thumbnails
THUMBNAIL_DIR=data/thumbnails
THUMBNAIL_QUALITY=85

# RTSP connection settings
RTSP_MAX_RETRIES=5
RTSP_BASE_DELAY=1.0
RTSP_MAX_DELAY=60.0
RTSP_HEALTH_CHECK_INTERVAL=30.0

# =============================================================================
# LOGGING
# =============================================================================

LOG_LEVEL=INFO

# SQL query logging (for debugging)
SQL_ECHO=false
